### Image Aesthetics

* For this we first need to download the images from the html files. The html files are located at /home/fatigue_internship/data/HTML_files in the server. There is 1 folder per brand. The code to run is present at FatigueManagement/codes/data_generation/downloadimage.py on github. It takes the location of the folder containing html files as input and downloads the images in the specified directory. Run the code as:

```
python downloadimage.py /home/fatigue_internship/data/HTML_files/BH/tmp
```

* The path where the images will be downloaded is mentioned in the download_folder variable in the downloadimage.py file. Currently this is /home/fatigue_internship/data/images/BH/ . The code needs to be run separately for separate brands.

* Once the images have been downloaded, the aesthetic features need to be created. The code for creating them is located at FatigueManagement/image_aesthetics/codes/Aesthetics_test.py . It takes as input the output of the previous file and generates a csv containing the aesthetics. Again, it needs to be run separately for separate brands. To change the location of the input, change the variable path_to_campaign_folders in the Aesthetics_test.py file. To change the location of the output, change the variable path_to_output_file. Run the code as:

```
python Aesthetics_test.py
```

Note: This code needs 2 more files to run - attNaes.prototxt and attNaesSmall.caffemodel. These files are located at FatigueManagement/image_aesthetics. The corresponding variables in the code are model_def and model_weights. 



### Image Tags

* The file is located at FatigueManagement/codes/data_generation/image_tags.R
* It takes as input the path to folder containing html files and outputs a csv containing the tags. Again, it needs to be run separately for separate brands. To change the input path change the variable folder_path and to change the output, modify the write_file_path variable. 
* Also, the line list_tags[[idx]] <- str_sub(url_components$path, 6, -6) in the code needs to be changed for different brands. 6 to -6 in the line describes the substring that we want as tag. It is different for different brands. For BH it is 6 to -6 while for others it is the entire string. 



### Interaction Features

* The file is located at FatigueManagement/codes/data_generation/interaction_features.R
* It takes as input the file containing the names of valid csv files (i.e. those with non-zero recipient ids). This path is stored in the variable file_path_non_zero_rids. These files are located at FatigueManagement/ouput/data_info. 
* Separate runs for different brands. 
* It also takes as input the path to the folder containing the csv data files. The corresponding variable is folder_path. 
* There are 3 other variables that can be changed to generate data for different windows. START_DATE_FOR_DATA, END_DATE_FOR_DATA AND MODELLING_WINDOW. Refer to the comments in the code for a detailed explanation of how it is done.
* The path to output csv is stored in variable output_file_path.


### Models
* File located at FatigueManagement/codes/data_generation/models.R
* It takes as input output of the interaction_features.R and outputs two modes m1 and m2. 


### Data Statistics
* Files are located at FatigueManagement/codes/plots
* All the files are commented stating what they do. 
* Input that each file takes is csv data file. histogram_plot.R , histogram_day_sent.R , histogram_plot_click.R , histogram_plot_click.R can take any 1 raw data csv file (such as those located as /home/fatigue_internship/data/ in the server). plot_covariates.R takes as input /home/fatigue_internship/output_statistics/all_data/all_data.csv. This csv is generated by computing the covariates across the entire period of data (with modelling window as 1).
